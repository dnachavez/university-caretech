// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

enum UserRole {
  STUDENT
  FACULTY
  STAFF
  ADMIN
}

enum UserStatus {
  UNVERIFIED // Email not verified
  PENDING_APPROVAL // Email verified but waiting for admin approval (for FACULTY/STAFF)
  ACTIVE // Email verified and approved (if needed)
  SUSPENDED
}

model User {
  id                String             @id @default(cuid())
  firstName         String
  lastName          String
  username          String             @unique
  email             String             @unique
  password          String
  role              UserRole
  status            UserStatus         @default(UNVERIFIED)
  emailVerified     Boolean            @default(false)
  verificationToken String?
  healthForm        StudentHealthForm?
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
}

model VerificationToken {
  id        String   @id @default(cuid())
  token     String   @unique
  email     String
  expires   DateTime
  createdAt DateTime @default(now())
}

model StudentHealthForm {
  id                   String   @id @default(cuid())
  userId               String   @unique
  user                 User     @relation(fields: [userId], references: [id])
  lastName             String
  firstName            String
  middleInitial        String?
  birthdate            DateTime
  gender               String
  birthPlace           String
  addressLine1         String
  addressLine2         String?
  city                 String
  state                String
  postalCode           String
  guardianName         String
  guardianContact      String
  emergencyContact     String
  relationship         String
  emergencyNumber      String
  pastIllnesses        String?
  hospitalization      String?
  bloodType            String
  allergies            Boolean  @default(false)
  immunized            Boolean  @default(false)
  communicableDisease  Boolean  @default(false)
  asthmatic            Boolean  @default(false)
  chronicIllness       Boolean  @default(false)
  hiking               Boolean  @default(false)
  dancing              Boolean  @default(false)
  swimming             Boolean  @default(false)
  basketball           Boolean  @default(false)
  ballgames            Boolean  @default(false)
  jogging              Boolean  @default(false)
  football             Boolean  @default(false)
  badminton            Boolean  @default(false)
  calisthenics         Boolean  @default(false)
  wallclimbing         Boolean  @default(false)
  notFitActivities     String?
  medicationPermission Boolean  @default(false)
  signaturePath        String
  dateSigned           DateTime @default(now())
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
}
